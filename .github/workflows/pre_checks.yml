name: Pre-Production Checks
run-name: ${{ github.actor }}'s Django CI && Testing
on:
    push:
        branches: [pre-production]

jobs:
    django_ci:
        name: Django CI
        runs-on: ubuntu-latest
        
        steps:
            - name: Checkout code
              uses: actions/checkout@v3

            - name: Setup Python ${{ matrix.python-version }}
              uses: actions/setup-python@v4
              with:
                python-version: '3.10'

            - name: Install requirements
              run: |
                  pip install --upgrade pip
                  pip install -r requirements.txt

            - name: Create Pull Request to Production branch
              uses: peter-evans/create-pull-request@v5
              with:
                author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
                signoff: false
                branch: production
                delete-branch: false

            # - name: Run tests
            #   run: |
            #       cd src
            #       python manage.py test

            # - name: Create Pull Request to Production branch
            #   uses: peter-evans/create-pull-request@v5
            #   with:
            #     author: ${{ github.actor }}
            #     signoff: false
            #     branch: production
            #     delete-branch: false
            #     title: Actions Update
            #     body: |
            #          Pull request report
            #          - Updated with *today's* date
            #          - Auto-generated by [create-pull-request]
                
